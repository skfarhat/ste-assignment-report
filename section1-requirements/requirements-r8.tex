\subsubsection{Tax Rules [R8]}

In this sub-section comments on defects found in requirements (R8.x) are provided, without necessarily delving into each requirement as many of these share the same defects.

% ----------------------------------
% Mutual exclusivity of tax brackets 
% ----------------------------------
\paragraph{Mutual exclusivity of tax brackets:}
Requirement (\REightFour) does not specify the existence of any mutual exclusivity between tax letters in the same tax groups i.e. between: 
\begin{itemize}[noitemsep]
\item 'M', 'S', and 'D' 
\item 'C', 'E', and 'F'
\item 'T' and 'U'
\end{itemize}
This will be assumed since logically a person cannot simultaneously have both (2 children) and (1 child), therefore cannot be in both groups. Similarly, one's marital status cannot be both single and divorced, hence the mutual exclusivity.  

% --------------------------------------
% Marital Status is required in tax code
% --------------------------------------
\paragraph{Marital status is required in tax code:}
Requirement (\REightFour) does not specify that the tax code MUST contain a marital status. There are many reasons why this can be justifiably assumed to be a missing requirement: 
\begin{enumerate}
	\item Requirements (\REightEight) and onwards all indicate that the tax to be calculated for their respective brackets has to be done after the Marital status tax has been applied. This suggests that some tax due to Marital status must have previously been applied. 
	\item Should it be possible that Marital status be absent from the tax code, then it would become possible for a tax code not to have any letters at all. This would conflict with requirement (\REightTwo). % This can happen if they have no Marital status, no children and are not in education. 
	% \item The reader is not aware of a marital status that does not belong outside of married, divroced, single. Common sense employed here. 
\end{enumerate}

% -----------------
% Unusual tax rates
% -----------------
\paragraph{Unusual tax rates \& negative salaries:}
The unusual tax rates were brought to the attention of the reader in the assignment notes hence there is no call for pointing them out as a defect. However, in view of the possibility of a tax payer earning a salary and paying all of it and more to the government (when tax rate > 100\%), one must ask whether negative salaries as a concept exist in Failovia. 
\par
It is not clear from the requirements how the application should respond to a user-provided negative salary or base amount. As testers, we would expect two valid application responses to negative salaries: 

\begin{enumerate}
	\item Calculate the tax from the negative salary leading to a negative tax. In practical terms, this means the tax authorities owe the client some money.
	\item Provide a user error when a negative salary of negative tax amount is input. 
\end{enumerate}

It is preferable that the approach that the application must undertake should be presented clearly in the requirements.

% --------------------------
% Contradictory requirements
% --------------------------
\paragraph{Contradictory requirements:}
The below requirement (\REightFive) is not correctly worded and may be interpreted differently by developers, whom it is believed may well have implemented the code based on what one would have expected the requirement to mean, rather than what it actually elicited. 
\par
\begin{figure}[H]
\begin{mdframed}
{
\it
\footnotesize
Calculation of tax for Married people: one of the following four bands will apply:
\begin{itemize}
	\item Married people with a current salary of less than £5000 will pay a tax rate of
	70\% of their base tax amount.
	\item Married people with a current salary less than £12,000 will pay a tax rate of
	90\% of their base tax amount.
	\item Married people with a current salary less than £27,000 will pay a tax rate of
	120\% of their base tax amount
	\item Married people with a current salary above than £27,000 will pay a tax rate
	of 130\% of their base tax amount
\end{itemize}	
}
\end{mdframed}
\caption{Requirement \REightFive}
\end{figure} 


It is noted from the above that the bullets contradict the ones preceding them: for someone earning £3,000 in salary, the first bullet implies they should pay a tax rate of 70\%, the second overrides the first bullet and implies they should pay 90\%, the third one 120\% and the fourth one 130\%. It is believed that the intention behind the bullets is to establish tax brackets as below: 
\begin{itemize}
	\item People earning £0 - £5,000 should pay 70\% tax rate 
	\item People earning £5,000 - £12,000 should pay 90\%
	\item People earning £12,000 - £27,000 should pay 120\%
	\item People earning over £27,000 should pay 130\%
\end{itemize}
The same applies for all subsequent requirements \REightSix \space to \REightTwelve. 

% Different tax rates for the same bracket
Requirements (\REightSix \space and \REightSeven) have contradictory third and fourth bullets which state different tax rates for the same tax brackets. Looking at the rest of the requirements we infer that this defect is due to a typo in the third bullet of \REightSix \space and \REightSeven. 

It is believed that the intention is as presented as below: 
\begin{itemize}
	\item People earning £11,000 - £22,000 should pay a rate of 125\%
	\item People earning £22,000 and above should pay a rate 132\%
\end{itemize}

% -------------
% EDGE SALARIES 
% -------------
\paragraph{Edge salaries:}
% 8 - Married section 
The requirements for taxing married people do not cover those who earn exactly £27,000. The third bullet ("less than") implies they are excluded from the 120\% tax rate, and the bullet right after ("above than") excludes them as well. 
\par
Salaries that are not covered by the requirements are summarised in the following:
\begin{itemize}
	\item Married and earning £27,000
	\item Single and earning £22,000
	\item Divorced and earning £24,000
	\item Single Child and earning £10,400
	\item Two children and earning £9,900
	\item More than 2 children and earning £9,000
	\item FT education below 24 and earning £3,000
	\item FT education 24 and above earning £3,000
\end{itemize}

% Would be helpful 
% [ Thus, for clarity, both of the following tax codes are valid. ] 
% It would be extra helpful to provide a tax code that should not be accepted (e.g. 1080MT90). In fairness the provided examples were appreciated as they helped clarify the requriement.